{"ast":null,"code":"import { Response, StitchClientError, StitchClientErrorCode } from \"mongodb-stitch-core-sdk\";\nimport { fetch } from 'whatwg-fetch';\n\nvar BrowserFetchTransport = function () {\n  function BrowserFetchTransport() {}\n\n  BrowserFetchTransport.prototype.roundTrip = function (request) {\n    var responsePromise = fetch(request.url, {\n      body: request.body,\n      headers: request.headers,\n      method: request.method,\n      mode: 'cors'\n    });\n    var responseTextPromise = responsePromise.then(function (response) {\n      return response.text();\n    });\n    return Promise.all([responsePromise, responseTextPromise]).then(function (values) {\n      var response = values[0];\n      var body = values[1];\n      var headers = {};\n      response.headers.forEach(function (value, key) {\n        headers[key] = value;\n      });\n      return new Response(headers, response.status, body);\n    });\n  };\n\n  BrowserFetchTransport.prototype.stream = function (request, open, retryRequest) {\n    if (open === void 0) {\n      open = true;\n    }\n\n    throw new StitchClientError(StitchClientErrorCode.StreamingNotSupported);\n  };\n\n  return BrowserFetchTransport;\n}();\n\nexport default BrowserFetchTransport;","map":{"version":3,"sources":["../../../../../src/core/internal/net/BrowserFetchTransport.ts"],"names":[],"mappings":"AAgBA,SAKE,QALF,EAME,iBANF,EAOE,qBAPF,QASO,yBATP;AAUA,SAAQ,KAAR,QAA6B,cAA7B;;AAGA,IAAA,qBAAA,GAAA,YAAA;AAAA,WAAA,qBAAA,GAAA,CA2BC;;AA1BQ,EAAA,qBAAA,CAAA,SAAA,CAAA,SAAA,GAAP,UAAiB,OAAjB,EAAsC;AACpC,QAAM,eAAe,GAAG,KAAK,CAAC,OAAO,CAAC,GAAT,EAAc;AACzC,MAAA,IAAI,EAAE,OAAO,CAAC,IAD2B;AAEzC,MAAA,OAAO,EAAE,OAAO,CAAC,OAFwB;AAGzC,MAAA,MAAM,EAAE,OAAO,CAAC,MAHyB;AAIzC,MAAA,IAAI,EAAE;AAJmC,KAAd,CAA7B;AAOA,QAAM,mBAAmB,GAAG,eAAe,CAAC,IAAhB,CAAqB,UAAA,QAAA,EAAQ;AACvD,aAAA,QAAQ,CAAC,IAAT,EAAA;AAAe,KADW,CAA5B;AAIA,WAAO,OAAO,CAAC,GAAR,CAAY,CAAC,eAAD,EAAkB,mBAAlB,CAAZ,EAAoD,IAApD,CAAyD,UAAA,MAAA,EAAM;AACpE,UAAM,QAAQ,GAAG,MAAM,CAAC,CAAD,CAAvB;AACA,UAAM,IAAI,GAAG,MAAM,CAAC,CAAD,CAAnB;AACA,UAAM,OAAO,GAA8B,EAA3C;AACA,MAAA,QAAQ,CAAC,OAAT,CAAiB,OAAjB,CAAyB,UAAC,KAAD,EAAQ,GAAR,EAAW;AAClC,QAAA,OAAO,CAAC,GAAD,CAAP,GAAe,KAAf;AACD,OAFD;AAGA,aAAO,IAAI,QAAJ,CAAa,OAAb,EAAsB,QAAQ,CAAC,MAA/B,EAAuC,IAAvC,CAAP;AACD,KARM,CAAP;AASD,GArBM;;AAuBA,EAAA,qBAAA,CAAA,SAAA,CAAA,MAAA,GAAP,UAAc,OAAd,EAAqC,IAArC,EAAkD,YAAlD,EAA2F;AAAtD,QAAA,IAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,IAAA,GAAA,IAAA;AAAW;;AAC9C,UAAM,IAAI,iBAAJ,CAAsB,qBAAqB,CAAC,qBAA5C,CAAN;AACD,GAFM;;AAGT,SAAA,qBAAA;AAAC,CA3BD,EAAA","sourceRoot":"","sourcesContent":["import { Response, StitchClientError, StitchClientErrorCode } from \"mongodb-stitch-core-sdk\";\nimport { fetch as fetch } from 'whatwg-fetch';\nvar BrowserFetchTransport = (function () {\n    function BrowserFetchTransport() {\n    }\n    BrowserFetchTransport.prototype.roundTrip = function (request) {\n        var responsePromise = fetch(request.url, {\n            body: request.body,\n            headers: request.headers,\n            method: request.method,\n            mode: 'cors'\n        });\n        var responseTextPromise = responsePromise.then(function (response) {\n            return response.text();\n        });\n        return Promise.all([responsePromise, responseTextPromise]).then(function (values) {\n            var response = values[0];\n            var body = values[1];\n            var headers = {};\n            response.headers.forEach(function (value, key) {\n                headers[key] = value;\n            });\n            return new Response(headers, response.status, body);\n        });\n    };\n    BrowserFetchTransport.prototype.stream = function (request, open, retryRequest) {\n        if (open === void 0) { open = true; }\n        throw new StitchClientError(StitchClientErrorCode.StreamingNotSupported);\n    };\n    return BrowserFetchTransport;\n}());\nexport default BrowserFetchTransport;\n//# sourceMappingURL=BrowserFetchTransport.js.map"]},"metadata":{},"sourceType":"module"}