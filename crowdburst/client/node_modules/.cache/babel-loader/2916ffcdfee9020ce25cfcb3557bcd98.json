{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { wrapDecodingError } from \"../../../internal/common/StitchErrorUtils\";\nimport Method from \"../../../internal/net/Method\";\nimport { StitchAuthDocRequest } from \"../../../internal/net/StitchAuthDocRequest\";\nimport { StitchAuthRequest } from \"../../../internal/net/StitchAuthRequest\";\nimport StitchRequestError from \"../../../StitchRequestError\";\nimport { StitchRequestErrorCode } from \"../../../StitchRequestErrorCode\";\nimport CoreAuthProviderClient from \"../internal/CoreAuthProviderClient\";\nimport UserApiKey from \"./models/UserApiKey\";\nimport UserApiKeyAuthProvider from \"./UserApiKeyAuthProvider\";\nvar ApiKeyFields;\n\n(function (ApiKeyFields) {\n  ApiKeyFields[\"NAME\"] = \"name\";\n})(ApiKeyFields || (ApiKeyFields = {}));\n\nvar CoreUserApiKeyAuthProviderClient = function (_super) {\n  __extends(CoreUserApiKeyAuthProviderClient, _super);\n\n  function CoreUserApiKeyAuthProviderClient(requestClient, authRoutes) {\n    var _this = this;\n\n    var baseRoute = authRoutes.baseAuthRoute + \"/api_keys\";\n    var name = UserApiKeyAuthProvider.DEFAULT_NAME;\n    _this = _super.call(this, name, requestClient, baseRoute) || this;\n    return _this;\n  }\n\n  CoreUserApiKeyAuthProviderClient.prototype.createApiKey = function (name) {\n    var _a;\n\n    var reqBuilder = new StitchAuthDocRequest.Builder();\n    reqBuilder.withMethod(Method.POST).withPath(this.baseRoute).withDocument((_a = {}, _a[ApiKeyFields.NAME] = name, _a)).withRefreshToken();\n    return this.requestClient.doAuthenticatedRequest(reqBuilder.build()).then(function (response) {\n      return UserApiKey.readFromApi(response.body);\n    }).catch(function (err) {\n      throw wrapDecodingError(err);\n    });\n  };\n\n  CoreUserApiKeyAuthProviderClient.prototype.fetchApiKey = function (keyId) {\n    var reqBuilder = new StitchAuthRequest.Builder();\n    reqBuilder.withMethod(Method.GET).withPath(this.getApiKeyRoute(keyId.toHexString()));\n    reqBuilder.withRefreshToken();\n    return this.requestClient.doAuthenticatedRequest(reqBuilder.build()).then(function (response) {\n      return UserApiKey.readFromApi(response.body);\n    }).catch(function (err) {\n      throw wrapDecodingError(err);\n    });\n  };\n\n  CoreUserApiKeyAuthProviderClient.prototype.fetchApiKeys = function () {\n    var reqBuilder = new StitchAuthRequest.Builder();\n    reqBuilder.withMethod(Method.GET).withPath(this.baseRoute);\n    reqBuilder.withRefreshToken();\n    return this.requestClient.doAuthenticatedRequest(reqBuilder.build()).then(function (response) {\n      var json = JSON.parse(response.body);\n\n      if (Array.isArray(json)) {\n        return json.map(function (value) {\n          return UserApiKey.readFromApi(value);\n        });\n      }\n\n      throw new StitchRequestError(new Error(\"unexpected non-array response from server\"), StitchRequestErrorCode.DECODING_ERROR);\n    }).catch(function (err) {\n      throw wrapDecodingError(err);\n    });\n  };\n\n  CoreUserApiKeyAuthProviderClient.prototype.deleteApiKey = function (keyId) {\n    var reqBuilder = new StitchAuthRequest.Builder();\n    reqBuilder.withMethod(Method.DELETE).withPath(this.getApiKeyRoute(keyId.toHexString()));\n    reqBuilder.withRefreshToken();\n    return this.requestClient.doAuthenticatedRequest(reqBuilder.build()).then(function () {});\n  };\n\n  CoreUserApiKeyAuthProviderClient.prototype.enableApiKey = function (keyId) {\n    var reqBuilder = new StitchAuthRequest.Builder();\n    reqBuilder.withMethod(Method.PUT).withPath(this.getApiKeyEnableRoute(keyId.toHexString()));\n    reqBuilder.withRefreshToken();\n    return this.requestClient.doAuthenticatedRequest(reqBuilder.build()).then(function () {});\n  };\n\n  CoreUserApiKeyAuthProviderClient.prototype.disableApiKey = function (keyId) {\n    var reqBuilder = new StitchAuthRequest.Builder();\n    reqBuilder.withMethod(Method.PUT).withPath(this.getApiKeyDisableRoute(keyId.toHexString()));\n    reqBuilder.withRefreshToken();\n    return this.requestClient.doAuthenticatedRequest(reqBuilder.build()).then(function () {});\n  };\n\n  CoreUserApiKeyAuthProviderClient.prototype.getApiKeyRoute = function (keyId) {\n    return this.baseRoute + \"/\" + keyId;\n  };\n\n  CoreUserApiKeyAuthProviderClient.prototype.getApiKeyEnableRoute = function (keyId) {\n    return this.getApiKeyRoute(keyId) + \"/enable\";\n  };\n\n  CoreUserApiKeyAuthProviderClient.prototype.getApiKeyDisableRoute = function (keyId) {\n    return this.getApiKeyRoute(keyId) + \"/disable\";\n  };\n\n  return CoreUserApiKeyAuthProviderClient;\n}(CoreAuthProviderClient);\n\nexport default CoreUserApiKeyAuthProviderClient;","map":{"version":3,"sources":["../../../../../src/auth/providers/userapikey/CoreUserApiKeyAuthProviderClient.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { wrapDecodingError } from \"../../../internal/common/StitchErrorUtils\";\nimport Method from \"../../../internal/net/Method\";\nimport { StitchAuthDocRequest } from \"../../../internal/net/StitchAuthDocRequest\";\nimport { StitchAuthRequest } from \"../../../internal/net/StitchAuthRequest\";\nimport StitchRequestError from \"../../../StitchRequestError\";\nimport { StitchRequestErrorCode } from \"../../../StitchRequestErrorCode\";\nimport CoreAuthProviderClient from \"../internal/CoreAuthProviderClient\";\nimport UserApiKey from \"./models/UserApiKey\";\nimport UserApiKeyAuthProvider from \"./UserApiKeyAuthProvider\";\nvar ApiKeyFields;\n(function (ApiKeyFields) {\n    ApiKeyFields[\"NAME\"] = \"name\";\n})(ApiKeyFields || (ApiKeyFields = {}));\nvar CoreUserApiKeyAuthProviderClient = (function (_super) {\n    __extends(CoreUserApiKeyAuthProviderClient, _super);\n    function CoreUserApiKeyAuthProviderClient(requestClient, authRoutes) {\n        var _this = this;\n        var baseRoute = authRoutes.baseAuthRoute + \"/api_keys\";\n        var name = UserApiKeyAuthProvider.DEFAULT_NAME;\n        _this = _super.call(this, name, requestClient, baseRoute) || this;\n        return _this;\n    }\n    CoreUserApiKeyAuthProviderClient.prototype.createApiKey = function (name) {\n        var _a;\n        var reqBuilder = new StitchAuthDocRequest.Builder();\n        reqBuilder\n            .withMethod(Method.POST)\n            .withPath(this.baseRoute)\n            .withDocument((_a = {},\n            _a[ApiKeyFields.NAME] = name,\n            _a))\n            .withRefreshToken();\n        return this.requestClient\n            .doAuthenticatedRequest(reqBuilder.build())\n            .then(function (response) {\n            return UserApiKey.readFromApi(response.body);\n        })\n            .catch(function (err) {\n            throw wrapDecodingError(err);\n        });\n    };\n    CoreUserApiKeyAuthProviderClient.prototype.fetchApiKey = function (keyId) {\n        var reqBuilder = new StitchAuthRequest.Builder();\n        reqBuilder\n            .withMethod(Method.GET)\n            .withPath(this.getApiKeyRoute(keyId.toHexString()));\n        reqBuilder.withRefreshToken();\n        return this.requestClient\n            .doAuthenticatedRequest(reqBuilder.build())\n            .then(function (response) {\n            return UserApiKey.readFromApi(response.body);\n        })\n            .catch(function (err) {\n            throw wrapDecodingError(err);\n        });\n    };\n    CoreUserApiKeyAuthProviderClient.prototype.fetchApiKeys = function () {\n        var reqBuilder = new StitchAuthRequest.Builder();\n        reqBuilder.withMethod(Method.GET).withPath(this.baseRoute);\n        reqBuilder.withRefreshToken();\n        return this.requestClient\n            .doAuthenticatedRequest(reqBuilder.build())\n            .then(function (response) {\n            var json = JSON.parse(response.body);\n            if (Array.isArray(json)) {\n                return json.map(function (value) { return UserApiKey.readFromApi(value); });\n            }\n            throw new StitchRequestError(new Error(\"unexpected non-array response from server\"), StitchRequestErrorCode.DECODING_ERROR);\n        })\n            .catch(function (err) {\n            throw wrapDecodingError(err);\n        });\n    };\n    CoreUserApiKeyAuthProviderClient.prototype.deleteApiKey = function (keyId) {\n        var reqBuilder = new StitchAuthRequest.Builder();\n        reqBuilder\n            .withMethod(Method.DELETE)\n            .withPath(this.getApiKeyRoute(keyId.toHexString()));\n        reqBuilder.withRefreshToken();\n        return this.requestClient\n            .doAuthenticatedRequest(reqBuilder.build())\n            .then(function () { });\n    };\n    CoreUserApiKeyAuthProviderClient.prototype.enableApiKey = function (keyId) {\n        var reqBuilder = new StitchAuthRequest.Builder();\n        reqBuilder\n            .withMethod(Method.PUT)\n            .withPath(this.getApiKeyEnableRoute(keyId.toHexString()));\n        reqBuilder.withRefreshToken();\n        return this.requestClient\n            .doAuthenticatedRequest(reqBuilder.build())\n            .then(function () { });\n    };\n    CoreUserApiKeyAuthProviderClient.prototype.disableApiKey = function (keyId) {\n        var reqBuilder = new StitchAuthRequest.Builder();\n        reqBuilder\n            .withMethod(Method.PUT)\n            .withPath(this.getApiKeyDisableRoute(keyId.toHexString()));\n        reqBuilder.withRefreshToken();\n        return this.requestClient\n            .doAuthenticatedRequest(reqBuilder.build())\n            .then(function () { });\n    };\n    CoreUserApiKeyAuthProviderClient.prototype.getApiKeyRoute = function (keyId) {\n        return this.baseRoute + \"/\" + keyId;\n    };\n    CoreUserApiKeyAuthProviderClient.prototype.getApiKeyEnableRoute = function (keyId) {\n        return this.getApiKeyRoute(keyId) + \"/enable\";\n    };\n    CoreUserApiKeyAuthProviderClient.prototype.getApiKeyDisableRoute = function (keyId) {\n        return this.getApiKeyRoute(keyId) + \"/disable\";\n    };\n    return CoreUserApiKeyAuthProviderClient;\n}(CoreAuthProviderClient));\nexport default CoreUserApiKeyAuthProviderClient;\n//# sourceMappingURL=CoreUserApiKeyAuthProviderClient.js.map"]},"metadata":{},"sourceType":"module"}